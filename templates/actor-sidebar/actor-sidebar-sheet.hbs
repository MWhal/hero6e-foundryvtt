{{log 'actor-sidebar-sheet' this}}

<form class="{{cssClass}}" autocomplete="off">

    <aside>
        <div class="sidebar">
            <img class="profile-img" src="{{actor.img}}" data-edit="img" title="{{actor.name}}" height="100"
                width="100" />

            <section class="flexrow">
                <ul class="attributes flexrow">

                    <li class="attribute health" data-ability="end">
                        <h4 class="attribute-name box-title">Endurance</h4>
                        <div class="attribute-value multiple">
                            <input name="system.characteristics.end.value" type="text"
                                value="{{actor.system.characteristics.end.value}}" data-dtype="Number">
                            <span class="sep"> / </span>
                            <span>
                                ({{actor.system.characteristics.end.max}})
                            </span>
                        </div>
                    </li>

                    <li class="attribute health" data-ability="body">
                        <h4 class="attribute-name box-title">Body</h4>
                        <div class="attribute-value multiple">
                            <input name="system.characteristics.body.value" type="text"
                                value="{{actor.system.characteristics.body.value}}" data-dtype="Number">
                            <span class="sep"> / </span>
                            <span>
                                ({{actor.system.characteristics.body.max}})
                            </span>
                        </div>
                    </li>

                    <li class="attribute health" data-ability="stun">
                        <h4 class="attribute-name box-title">Stun</h4>
                        <div class="attribute-value multiple">
                            <input name="system.characteristics.stun.value" type="text"
                                value="{{actor.system.characteristics.stun.value}}" data-dtype="Number">
                            <span class="sep"> / </span>
                            <span>
                                ({{actor.system.characteristics.stun.max}})
                            </span>
                        </div>
                    </li>

                </ul>
            </section>
        </div>
    </aside>

    <header class="char-header sheet-header">
        <div class="header-fields">
            <h1 class="charname"><input name="name" type="text" value="{{actor.name}}" placeholder="Name" /></h1>

        </div>
    </header>

    <nav class="sheet-navigation flexrow" data-group="primary">

        <a class="item-nav" data-tab="attacks">Attacks</a>
        <a class="item-nav" data-tab="defenses">Defenses</a>
        <a class="item-nav" data-tab="skills">Skills</a>

        <a class="item-nav" data-tab="maneuvers">Maneuvers</a>
        <a class="item-nav" data-tab="powers">Powers</a>
        <a class="item-nav" data-tab="equipment">Equipment</a>
        <a class="item-nav" data-tab="movement">Characteristics</a>
        <a class="item-nav" data-tab="other">Other</a>
        <a class="item-nav" data-tab="description">Description</a>
    </nav>

    {{!-- Sheet Body --}}
    <section class="sheet-body">
        <section class="sheet-content"> {{!-- sheet-content scrolls --}}

            {{!-- Attacks Tab --}}
            <div class="tab tab-body" data-group="primary" data-tab="attacks">

                <table>
                    <tr>
                        <th></th>
                        <th>{{localize "ActorSheet.Name"}}</th>
                        <th>{{localize "ActorSheet.HitMod"}}</th>
                        <th>{{localize "ActorSheet.OffVDef"}}</th>
                        <th>{{localize "ActorSheet.Dmg"}}</th>
                        <th>{{localize "ActorSheet.Res"}}</th>
                        <th>{{localize "ActorSheet.End"}}</th>
                        <th>{{localize "ActorSheet.Aoe"}}</th>
                        <th>{{localize "ActorSheet.Roll"}}</th>
                        <th>
                            <span class="item-controls">
                                <a class="item-control item-create" title="Create attack" data-type="attack"><i
                                        class="fas fa-plus"></i> Add attack</a>
                            </span>
                        </th>
                    </tr>
                    {{#each items as |item id|}}
                    {{#if (eq item.type "attack") }}
                    <tr class="item" data-item-id="{{item._id}}">
                        <td>
                            <div class="item-image"><img src="{{item.img}}" title="{{item.name}}" width="24"
                                    height="24" /></div>
                        </td>
                        <td>{{item.name}}</td>
                        <td>{{item.system.toHitMod}}</td>
                        <td>{{item.system.uses}} vs {{item.targets}}</td>
                        <td>{{item.system.damage}}</td>
                        <td>{{item.system.class}}</td>
                        <td>{{item.system.end}}</td>
                        {{#if (eq item.system.areaOfEffect.type "none")}}
                        <td>-</td>
                        {{/if}}
                        {{#if (ne item.system.areaOfEffect.type "none")}}
                        <td>{{item.system.areaOfEffect.type}} ({{item.system.areaOfEffect.value}})</td>
                        {{/if}}
                        <td><a class="item-image flex1 item-attack"><i class="fas fa-dice" title="{{item.name}}"
                                    width="24" height="24"></i></a></td>
                        <td>
                            <div class="item-controls" data-group="mode">
                                <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                                <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                            </div>
                        </td>
                    </tr>
                    {{/if}}
                    {{/each}}
                </table>

            </div> {{!-- Attacks Tab --}}


            {{!-- Defenses Tab --}}
            <div class="tab tab-body" data-group="primary" data-tab="defenses">
                <table>
                    <tr>
                        <th>#</th>
                        <th class="left">{{localize "ActorSheet.Name"}}</th>
                        <th class="left">{{localize "ActorSheet.Type"}}</th>
                        <th>{{localize "ActorSheet.Value"}}</th>
                        <th>{{localize "ActorSheet.Res"}}</th>
                        <th>{{localize "ActorSheet.Hard"}}</th>
                        <th>{{localize "ActorSheet.Imp"}}</th>
                        <th>{{localize "ActorSheet.Active"}}</th>
                        <th>
                            <a class="item-control item-create" title="Create defense" data-type="defense">
                                <i class="fas fa-plus"></i> Add defense</a>
                        </th>
                    </tr>
                    {{#each items as |item id|}}
                    {{#if (eq item.type "defense") }}
                    <tr class="item" data-item-id="{{item._id}}">
                        <td style="min-width: 24px">
                            <div class="item-image"><img src="{{item.img}}" title="{{item.name}}" width="24"
                                    height="24" /></div>
                        </td>
                        <td class="left">{{item.name}}</td>
                        <td class="left">{{item.system.defenseType}}</td>
                        <td>{{item.system.value}}</td>
                        <td >{{item.system.resistant}}</td>
                        <td>{{item.system.hardened}}</td>
                        <td>{{item.system.impenetrable}}</td>
                        <td>
                            <input type="checkbox" name="system.active" {{checked
                                system.active}} data-dtype="Boolean" />
                            
                        </td>
                        <td>
                            <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                            <a class="item-control item-delete" title="Delete Item">
                                <i class="fas fa-trash"></i>
                            </a>
                        </td>

                    </tr>
                    {{/if}}
                    {{/each}}

                </table>

            </div> {{!-- Defenses Tab --}}


            {{!-- Powers Tab --}}
            <div class="tab tab-body" data-group="primary" data-tab="powers">
                <table>
                    <tr>
                        <th></th>
                        <th class="left">{{localize "ActorSheet.Name"}}</th>
                        <th>{{localize "ActorSheet.End"}}</th>
                        <th class="left">{{localize "ActorSheet.Description"}}</th>
                        <th>{{localize "ActorSheet.Active"}}</th>
                        <th></th>
                    </tr>
                    {{#each items as |item id|}}
                    {{#if (eq item.type "power") }}
                    <tr class="item" data-item-id="{{item._id}}">
                        <td>
                            <div class="item-image"><img src="{{item.img}}" title="{{item.name}}" width="24"
                                    height="24" /></div>
                        </td>
                        <td class="left">{{item.name}}</td>
                        <td>{{item.end}}</td>
                        <td class="left">{{item.description}}</td>
                        <td>
                            {{#if item.system.showToggle}}<input type="checkbox" name="system.active" {{checked
                                system.active}} data-dtype="Boolean" />
                            {{/if}}
                        </td>
                        <td>
                            <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                            <a class="item-control item-delete" title="Delete Item">
                                <i class="fas fa-trash"></i>
                            </a>
                        </td>
                    </tr>
                    {{/if}}
                    {{/each}}

                </table>

            </div> {{!-- Powers Tab --}}


        </section> {{!-- sheet-content }}
    </section> {{!-- Sheet Body --}}

</form>